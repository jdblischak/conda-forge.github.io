"use strict";(self.webpackChunkcf_infra_docs=self.webpackChunkcf_infra_docs||[]).push([[4987],{51799:(t,e,a)=>{a.r(e),a.d(e,{default:()=>u,measureProgress:()=>h});var i=a(16550),r=a(52263),s=a(80295),n=a(80647),o=a(67294),l=a(80708);const c={migration_details:"migration_details_nlw5",migration_details_bar:"migration_details_bar_y6e_",migration_details_toggle:"migration_details_toggle_jL7E",migration_details_filter:"migration_details_filter_Kdmj",migration_details_filter_button:"migration_details_filter_button_NtvO",migration_details_filter_done:"migration_details_filter_done_vhyw",migration_details_filter_done_on:"migration_details_filter_done_on_AfR9",migration_details_filter_in_pr:"migration_details_filter_in_pr_H6ky",migration_details_filter_in_pr_on:"migration_details_filter_in_pr_on_a1pe",migration_details_filter_awaiting_pr:"migration_details_filter_awaiting_pr_U00X",migration_details_filter_awaiting_pr_on:"migration_details_filter_awaiting_pr_on_xUhZ",migration_details_filter_awaiting_parents:"migration_details_filter_awaiting_parents_HeSQ",migration_details_filter_awaiting_parents_on:"migration_details_filter_awaiting_parents_on_x2c_",migration_details_filter_not_solvable:"migration_details_filter_not_solvable__Z99",migration_details_filter_not_solvable_on:"migration_details_filter_not_solvable_on_Blts",migration_details_filter_bot_error:"migration_details_filter_bot_error_qFh_",migration_details_filter_bot_error_on:"migration_details_filter_bot_error_on_ZzeE",migration_details_filter_icon:"migration_details_filter_icon_fPLm",collapsed:"collapsed_q3RP",expanded:"expanded_ivG_"};var d=a(85893);const g=[["done","Done"],["in-pr","In PR"],["awaiting-pr","Awaiting PR"],["awaiting-parents","Awaiting parents"],["not-solvable","Not solvable"],["bot-error","Bot error"]],_=g.reduce(((t,e)=>{let[a,i]=e;return{...t,[a]:i}}),{}),m="migration-toggle";function h(t){const e=t.done.length+t["in-pr"].length,a=e+t["awaiting-parents"].length+t["awaiting-pr"].length+t["bot-error"].length+t["not-solvable"].length;return{done:e,percentage:e/(a||1)*100,total:a}}function u(){const t=(0,i.TH)(),{siteConfig:e}=(0,r.Z)(),[a,l]=(0,o.useState)({name:t.pathname.replace("/status/migration","").split("/").pop(),details:null,redirect:!1,view:"table"}),g=t=>{if(window&&window.localStorage)try{window.localStorage.setItem(m,t)}catch(e){console.warn("error writing to local storage",e)}l((e=>({...e,view:t})))};if((0,o.useEffect)((()=>{if(!a.name)return l((t=>({...t,redirect:!0})));let t="";if(window&&window.localStorage)try{t=window.localStorage.getItem(m)}catch(e){console.warn("error reading from local storage",e)}(async()=>{try{const e=s.j.migrations.details.replace("<NAME>",a.name),i=await(await fetch(e)).json();i.progress=h(i),l((e=>({...e,details:i,view:t||e.view})))}catch(e){console.warn(`error loading migration: ${a.name}`,e),l((t=>({...t,redirect:!0})))}})()}),[]),a.redirect)return(0,d.jsx)(i.l_,{to:"/status",replace:!0});const{details:_,name:u,view:b}=a;return(0,d.jsx)(n.Z,{title:e.title,description:"Status dashboard for conda-forge",children:(0,d.jsx)("main",{className:`container ${c.migration_details}`,children:(0,d.jsxs)("div",{className:"card margin-top--xs",children:[(0,d.jsxs)("div",{className:"card__header",children:[(0,d.jsxs)("div",{className:c.migration_details_toggle,children:[(0,d.jsx)("button",{onClick:()=>g("table"),children:"Table View"})," ",(0,d.jsx)("button",{onClick:()=>g("graph"),children:"Graph View"})]}),(0,d.jsx)(f,{children:u}),(0,d.jsx)("div",{style:{clear:"both"}})]}),(0,d.jsxs)("div",{className:"card__body",style:{overflow:"auto"},children:[_&&(0,d.jsx)(p,{details:_}),"graph"===b?(0,d.jsx)(j,{children:u}):_&&(0,d.jsx)(w,{details:_})]})]})})})}function p(t){let{details:e}=t;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("h4",{children:["PRs made ",e.progress.percentage.toFixed(0),"%"]}),(0,d.jsx)("div",{className:c.migration_details_bar,children:g.filter((t=>{let[a]=t;return e[a]?.length})).map(((t,a)=>{let[i]=t;return(0,d.jsx)("div",{title:_[i],className:c[`migration_details_filter_${i.replace("-","_")}`],style:{flex:e[i].length}},a)}))})]})}function f(t){let{children:e}=t;return(0,d.jsx)("nav",{"aria-label":"breadcrumbs",children:(0,d.jsxs)("ul",{className:"breadcrumbs",children:[(0,d.jsx)("li",{className:"breadcrumbs__item",children:(0,d.jsx)("a",{className:"breadcrumbs__link",href:"/",children:"conda-forge"})}),(0,d.jsx)("li",{className:"breadcrumbs__item",children:(0,d.jsx)("a",{className:"breadcrumbs__link",href:"/status",children:"Status"})}),(0,d.jsx)("li",{className:"breadcrumbs__item",children:(0,d.jsx)("a",{className:"breadcrumbs__link",href:"/status#migrations",children:"Migrations"})}),(0,d.jsx)("li",{className:"breadcrumbs__item breadcrumbs__item--active",children:(0,d.jsx)("a",{className:"breadcrumbs__link",href:"",children:e})})]})})}function b(t){let{counts:e,filters:a,onFilter:i}=t;const r=c.migration_details_filter_icon;return(0,d.jsx)("div",{className:c.migration_details_filter,children:g.map(((t,s)=>{let[n,o]=t;const l=`migration_details_filter_${n.replace("-","_")}`;return(0,d.jsxs)("div",{className:[c.migration_details_filter_button,c[l],a[n]&&c[`${l}_on`]].join(" "),onClick:()=>i(n),children:[a[n]?(0,d.jsx)("i",{className:`${r} fa-solid fa-filter-circle-xmark`}):(0,d.jsx)("i",{className:`${r} fa-solid fa-filter`})," ",o," (",e[n],")"]},s)}))})}function j(t){const[e,a]=(0,o.useState)(""),i=s.j.migrations.graph.replace("<NAME>",t.children);return(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{style:{textAlign:"center"},children:(0,d.jsx)("a",{href:i,target:"blank",rel:"noopener noreferrer",children:(0,d.jsxs)("code",{children:[t.children,".svg"]})})}),e?(0,d.jsx)("p",{style:{textAlign:"center"},children:"Graph is unavailable."}):(0,d.jsx)("div",{style:{overflowX:"auto"},children:(0,d.jsx)(l.Z,{onError:t=>a(t),src:i,title:t.children,description:`Migration graph for ${t.children}`})})]})}function w(t){let{details:e}=t;const[a,i]=(0,o.useState)(g.reduce(((t,e)=>{let[a]=e;return{...t,[a]:!0}}),{})),r=e._feedstock_status,s=g.reduce(((t,i)=>{let[r]=i;return a[r]?t:t.concat(e[r].map((t=>[t,r])))}),[]).sort(((t,e)=>r[e[0]].num_descendants-r[t[0]].num_descendants||g.findIndex((e=>e[0]==t[1]))-g.findIndex((t=>t[0]==e[1]))||t[0].localeCompare(e[0])));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(b,{counts:g.reduce(((t,a)=>{let[i]=a;return{...t,[i]:e[i]?.length}}),{}),filters:{...a},onFilter:t=>i((e=>({...e,[t]:!e[t]})))}),s.length>0&&(0,d.jsxs)("table",{children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{style:{width:200},children:"Name"}),(0,d.jsx)("th",{style:{width:115},children:"Status"}),(0,d.jsx)("th",{style:{width:115},children:"Total number of children"}),(0,d.jsx)("th",{style:{flex:1},children:"Immediate children"})]})}),(0,d.jsx)("tbody",{children:s.map(((t,e)=>{let[a,i]=t;return(0,d.jsx)(x,{children:{feedstock:r[a],name:a,status:i}},e)}))})]})]})}function x(t){let{children:e}=t;const[a,i]=(0,o.useState)(!0),{feedstock:r,name:s,status:n}=e,l=r.immediate_children||[],g=r.num_descendants,m=r.pr_url,h=r.pre_pr_migrator_status;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:m?(0,d.jsx)("a",{href:m,children:s}):h?(0,d.jsx)("span",{className:`${a?c.collapsed:c.expanded}`,onClick:()=>i(!a),children:s}):(0,d.jsx)("span",{children:s})}),(0,d.jsx)("td",{style:{textAlign:"center"},children:_[n]}),(0,d.jsx)("td",{style:{textAlign:"center"},children:g||null}),(0,d.jsx)("td",{children:l.map(((t,e)=>(0,d.jsxs)(o.Fragment,{children:[(0,d.jsx)("span",{style:{marginBottom:1},className:"badge badge--secondary",children:t}),l.length-1===e?"":" "]},e)))})]}),h&&!a&&(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:4,children:(0,d.jsx)("pre",{dangerouslySetInnerHTML:{__html:h}})})})]})}},80295:(t,e,a)=>{a.d(e,{O:()=>i,j:()=>r});const i={usage:{options:{responsive:!0,plugins:{legend:{display:!1}},scales:{x:{type:"time",time:{minUnit:"hour"}},y:{beginAtZero:!0,precision:0}}}}},r={cloud:{anaconda:{api:"https://sqvvxmkr4r26.statuspage.io/api/v2/status.json",link:"https://anaconda.statuspage.io/",title:"Anaconda"},appveyor:{api:"https://status.appveyor.com/api/v2/status.json",link:"https://status.appveyor.com/",title:"AppVeyor"},azure:{api:"https://conda-forge.herokuapp.com/status-monitor/azure",link:"https://status.dev.azure.com/",title:"Azure DevOps"},circle:{api:"https://status.circleci.com/api/v2/status.json",link:"https://status.circleci.com",title:"Circle CI"},github:{api:"https://www.githubstatus.com/api/v2/status.json",link:"https://www.githubstatus.com/",title:"GitHub"},open_gpu_server:{api:"https://conda-forge.herokuapp.com/status-monitor/open-gpu-server",link:"https://ci-status.quansight.dev/",title:"Open GPU Server"},quay:{api:"https://status.redhat.com/api/v2/status.json",link:"https://status.redhat.com/",title:"Quay.io"},travis:{api:"https://www.traviscistatus.com/api/v2/status.json",link:"https://www.traviscistatus.com/",title:"Travis CI"}},azure:{pipelines:"https://conda-forge.herokuapp.com/status-monitor/report/azure-pipelines",status:"https://conda-forge.herokuapp.com/status-monitor/azure"},github:{actions:"https://conda-forge.herokuapp.com/status-monitor/report/github-actions"},stats:"https://raw.githubusercontent.com/conda-forge/by-the-numbers/main/data/live_counts.json",migrations:{details:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/migration_json/<NAME>.json",graph:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/migration_svg/<NAME>.svg?sanitize=true",status:{closed:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/closed_status.json",longterm:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/longterm_status.json",regular:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/regular_status.json"}},repos:{badges:[{name:"conda-forge documentation",link:"https://github.com/conda-forge/conda-forge.github.io",badge:"https://github.com/conda-forge/conda-forge.github.io/workflows/deploy/badge.svg",badgeLink:"https://github.com/conda-forge/conda-forge.github.io/actions?query=workflow%3Adeploy"},{name:"autotick bot",link:"https://github.com/regro/cf-scripts",badge:"https://github.com/regro/cf-scripts/actions/workflows/bot-bot.yml/badge.svg",badgeLink:"https://github.com/regro/cf-scripts/actions"},{name:"feedstock creation",link:"https://github.com/conda-forge/staged-recipes",badge:"https://github.com/conda-forge/admin-requests/actions/workflows/create_feedstocks.yml/badge.svg",badgeLink:"https://github.com/conda-forge/admin-requests/actions/workflows/create_feedstocks.yml"},{name:"admin migrations",link:"https://github.com/conda-forge/admin-migrations",badge:"https://github.com/conda-forge/admin-migrations/actions/workflows/migrate.yml/badge.svg",badgeLink:"https://github.com/conda-forge/admin-migrations/actions/workflows/migrate.yml"}],cdn:{api:"https://s3.amazonaws.com/conda-static.anaconda.org/conda-forge/last-updated",link:"https://conda-static.anaconda.org/conda-forge/rss.xml"},services:{api:"https://conda-forge.herokuapp.com/alive",link:"https://github.com/conda-forge/conda-forge-webservices"}},travis:{usage:"https://conda-forge.herokuapp.com/status-monitor/report/travis-ci"},versions:{api:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/version_status.json",pr:"https://github.com/conda-forge/<NAME>-feedstock/blob/main/recipe/meta.yaml"},schemas:{"conda-forge.yml":"https://raw.githubusercontent.com/conda-forge/conda-smithy/main/conda_smithy/data/conda-forge.json"}}}}]);